# Teppen COR カード効果関数 要件定義書

## 概要

COR（基本パック）全180枚のカード効果を実装するために必要な効果関数の一覧。
既存の `core/effects.ts` に実装済みのものと、新規実装が必要なものを整理する。

---

## 1. 実装状況サマリー

| カテゴリ | 実装済み | 未実装 |
|---------|---------|--------|
| ステータス効果付与 | 2 | 12 |
| ダメージ系 | 3 | 8 |
| バフ/デバフ系 | 2 | 6 |
| 回復系 | 1 | 3 |
| カード操作系 | 1 | 10 |
| 破壊/除去系 | 1 | 5 |
| リソース操作系 | 3 | 3 |
| 特殊メカニクス | 0 | 12 |
| 条件/トリガーシステム | 0 | 8 |
| **合計** | **13** | **67** |

---

## 2. 実装済み関数一覧

### 2.1 関数名ベース（`resolveEffectByFunctionName`）

| 関数名 | 説明 | 使用カード例 |
|--------|------|-------------|
| `action_effect` | アクション効果マーカー（エンジン側で制御） | #44 竜王の審判 |
| `split_damage_all_enemy_units` | 全敵ユニットにダメージ振り分け | #15 ラギアクルス, #23 バレッタ, #44 竜王の審判 |
| `art_charge` | アーツチャージ（AP獲得） | #13 さくら, #27 衝撃波, #30 ヘッドショット |

### 2.2 Effect型ベース（`resolveEffect`）

| EffectType | 関数名 | 説明 |
|-----------|--------|------|
| `damage` | `resolveDamageEffect` | 単体/ヒーローへのダメージ |
| `heal` | `resolveHealEffect` | 単体/ヒーローのHP回復 |
| `buff` | `resolveBuffEffect` | 攻撃力/HP増加 |
| `debuff` | `resolveDebuffEffect` | 攻撃力減少 |
| `status` | `resolveStatusEffect` | ステータス効果付与（※骨組みのみ） |
| `draw` | `resolveDrawEffect` | デッキからドロー |
| `destroy` | `resolveDestroyEffect` | ユニット破壊 |
| `mp_gain` | `resolveMpGainEffect` | MP獲得 |
| `ap_gain` | `resolveApGainEffect` | AP獲得 |

---

## 3. 新規実装が必要な効果関数

### 3.1 ステータス効果付与系

#### `grant_rush` - 臨戦付与
- **説明**: ユニットに＜臨戦＞を付与（プレイ直後に攻撃可能）
- **対象**: 自身 / 味方ユニット
- **使用カード**: #2 ガイ, #5 ドスランポス, #9 ソニック・オストリーグ, #19 エンリコ, #22 カーネル, #23 バレッタ, #25 リュウ, #26 リオレウス, #150 イビルジョー
- **実装メモ**: 場に出た時の攻撃待機時間をスキップする

#### `grant_flight` - 空戦付与
- **説明**: ユニットに＜空戦＞を付与（対空以外に攻撃されない）
- **対象**: 自身 / 味方ユニット / 条件付き
- **使用カード**: #7, #12, #17, #42 上空からの強襲, #96 プラズマ(呼応), #100, #107, #111, #126 フックショット, #134 魔人化, #144, #154
- **実装メモ**: 一時的付与（1回攻撃するまで）のバリエーションあり

#### `grant_shield` - シールド付与
- **説明**: ユニットまたはヒーローに＜シールド＞を付与（1回のダメージ無効化）
- **対象**: 自身 / 味方ユニット / 味方ヒーロー
- **使用カード**: #5, #46, #54, #59, #63, #67, #72 三角跳び, #73 吹き荒れる砂塵, #140 レイダーキラー
- **CSV関数**: `shield:1`, `target:friendly_unit;shield:1`, `target:friendly_hero;shield:1`

#### `grant_agility` - 俊敏付与
- **説明**: ユニットに＜俊敏＞を付与（攻撃間隔短縮）
- **使用カード**: #25, #71, #106, #109, #112, #116, #134 魔人化
- **CSV関数**: `agility`

#### `grant_combo` - 連撃付与
- **説明**: ユニットに＜連撃＞を付与（追加攻撃、一時的含む）
- **使用カード**: #20 ドノヴァン, #22 カーネル, #24 レディ, #66 ラージャン, #71 春麗
- **実装メモ**: 一時的（1回攻撃するまで）のバリエーションあり

#### `grant_veil` - ヴェール付与
- **説明**: ユニットに＜ヴェール＞を付与（効果ダメージ無効）
- **使用カード**: #92 ディー, #111 ゼノ・ジーヴァ, #161 ネルギガンテ

#### `grant_heavy_pierce` - 重貫通付与
- **説明**: ユニットに＜重貫通＞を付与
- **使用カード**: #10 フレイム・スタッガー, #61 クレッセント・グリズリー

#### `grant_crush` - 圧倒付与
- **説明**: ユニットに＜圧倒＞を付与（貫通ダメージ）
- **対象**: 自身 / 全味方ユニット（一時的）
- **使用カード**: #13 さくら（全味方に一時付与）, #153 プロトタイラント

#### `grant_spillover` - 波及付与
- **説明**: ユニットに＜波及＞を付与（余剰ダメージがヒーローへ）
- **使用カード**: #137 ドスギルオス（クエストLv3報酬）

#### `grant_anti_air` - 対空付与
- **説明**: ユニットに＜対空＞を付与（空戦ユニットを攻撃可能）
- **使用カード**: #24 レディ

#### `grant_seal` - 封印付与
- **説明**: 対象を封印状態にする（効果無効化）
- **対象**: 敵ユニット1体 / 正面の敵ユニット
- **使用カード**: #60 ツィツィヤック, #74 武装解除, #90 魂の献上

#### `grant_halt` - 停止付与
- **説明**: 対象を一定秒間停止（行動不能）にする
- **対象**: ランダム敵ユニット1体 / 正面 / 指定
- **パラメータ**: duration（5秒 or 13秒）
- **使用カード**: #93 ドスバギィ(5秒), #99 アルケニー(5秒), #101 アナカリス(13秒), #106 ウェブ・スパイダス(13秒), #115 モリガン(5秒), #121 クリスタルハンター(5秒), #129 苦悩(5秒), #131 ダークホールド(13秒)

---

### 3.2 ダメージ系

#### `damage_front_unit` - 正面ダメージ
- **説明**: 正面のユニットに指定ダメージ
- **使用カード**: #3 アクセル(1), #13 さくら(2), #19 エンリコ(3/死亡時), #106 ウェブ・スパイダス(3)

#### `damage_random_enemy_unit` - ランダム敵単体ダメージ
- **説明**: ランダムな敵ユニット1体に指定ダメージ
- **使用カード**: #6 ラングロトラ(2), #26 リオレウス(6), #34 加撃(1), #40 刺し違え(5)

#### `damage_all_units` - 全ユニットダメージ
- **説明**: 全てのユニットに指定ダメージ
- **使用カード**: #16 ジンオウガ(1), #41 冷徹な悪魔狩り(4)

#### `damage_all_units_and_heroes` - 全ユニット＆ヒーローダメージ
- **説明**: 全てのユニットとヒーローに指定ダメージ
- **使用カード**: #8 フォレスト・スパイヤー(1/死亡時)

#### `damage_enemy_hero` - 敵ヒーローダメージ
- **説明**: 敵ヒーローに指定ダメージ
- **使用カード**: #14 フェイロン(1/攻撃時), #28 タル爆弾(3), #30 ヘッドショット(3), #35 不意打ち(2)

#### `damage_all_enemy_units` - 全敵ユニットダメージ（均等）
- **説明**: 全ての敵ユニットに均等に指定ダメージ（振り分けではなく各ユニットに同値）
- **使用カード**: #18 シャイニング・タイガード(1), #28 タル爆弾(1), #157 VAVA(3/Lv3)

#### `pierce_damage` - 貫通ダメージ
- **説明**: シールドを無視してダメージを与える
- **使用カード**: #37 ストームトルネード(6), #38 託された弾薬(4), #149 ロレント

#### `damage_halted_enemies` - 停止状態の敵にダメージ
- **説明**: 停止状態の全敵ユニットに指定ダメージ
- **使用カード**: #104 ネルスキュラ(6), #113 エイダ・ウォン(6)

#### `random_damage_range` - ランダム範囲ダメージ
- **説明**: 対象に2〜4のランダムダメージ
- **使用カード**: #130 つまみ食い

#### `damage_lowest_hp_enemy` - 最低HP敵にダメージ
- **説明**: 最もHPの低いランダムな敵ユニット1体にダメージ
- **使用カード**: #11 ガンボルト(1/死亡時)

#### `damage_flight_units` - 空戦ユニットにダメージ
- **説明**: ＜空戦＞を持つ全ユニットにダメージ＆空戦解除
- **使用カード**: #89 風翔の暴嵐(7)

---

### 3.3 バフ/デバフ系

#### `buff_attack` - 攻撃力バフ
- **説明**: 味方ユニットの攻撃力を増加
- **対象**: 単体/全体/ランダム
- **使用カード**: #4(+1/ランダム), #31(+2/単体), #32(+2/単体), #33(+1/全体), #79(+2/単体)

#### `buff_hp` - HPバフ
- **説明**: 味方ユニットのHPを増加
- **対象**: 単体/全体/ランダム
- **使用カード**: #49(+2/ランダム), #51(+2/ランダム), #53(+2/全味方), #62(+3/ランダム), #65(+3/ランダム), #75(+2/単体), #76(+5/単体), #77(+3/全味方), #78(+7/全味方), #81(+4/単体), #82(+6/単体)

#### `buff_attack_and_hp` - 攻撃力＆HPバフ
- **説明**: 対象の攻撃力とHPを同時に増加
- **パラメータ**: attackBuff, hpBuff（個別指定）
- **使用カード**: #5(+1/+1), #47(+1/+1/撃破時), #86(+2/+2/全体), #90(+7/+7), #166(+2/+2)

#### `temp_buff_attack` - 一時的攻撃力バフ
- **説明**: 1回攻撃するまでの一時的な攻撃力増加
- **使用カード**: #17(+2), #39(+2/全体), #42(+2), #94(-1/敵), #103(-2/敵), #105(-2/全敵), #165(+2)

#### `debuff_attack` - 攻撃力デバフ
- **説明**: 敵ユニットの攻撃力を減少
- **対象**: 単体/全体/一時的
- **使用カード**: #94(-1/一時), #103(-2/一時), #105(-2/一時/全体), #119(-1), #124(-1/一時/全体), #128(-3/一時)

#### `buff_self_on_condition` - 条件付き自己バフ
- **説明**: 特定条件達成時に自身をバフ
- **使用カード**: #19(敵なし:+1/+2), #54(敵なし:+1/+1), #153(敵なし:圧倒)

#### `split_heal_friendly_units` - 味方ユニットHP振り分け
- **説明**: 味方ユニットにHPを振り分ける
- **使用カード**: #55 バブリー・クラブロス(HP3), #56 アーマー・アルマージ(HP3/攻撃時)

---

### 3.4 回復系

#### `heal_hero` - ヒーロー回復
- **説明**: 味方ヒーローのライフを回復
- **使用カード**: #48 アベル(+4), #57 シェリー(+2), #88 復興の夢(+4), #130 つまみ食い(ダメージ分), #137 ドスギルオス(+3/Quest Lv4), #173 身勝手な捕食(+4)

#### `life_sacrifice` - ライフ犠牲
- **説明**: 味方ヒーローのライフを消費してコストとする
- **パラメータ**: sacrificeAmount
- **使用カード**: #137(3), #151(3), #152(3), #164(2), #165(3), #166(7)

#### `halve_hero_life` - ヒーローライフ半減
- **説明**: 味方ヒーローのライフを半分にする
- **使用カード**: #133 隠された真意

---

### 3.5 カード操作系

#### `explore` - 探索
- **説明**: デッキから特定カードを検索してEXポケットに加える
- **使用カード**: #14 フェイロン(激昂), #21 レオン(ハンドガン), #46 メットール(応援)

#### `draw_to_ex` - EXポケットにドロー
- **説明**: デッキから1枚引いてEXポケットに加える
- **使用カード**: #103 ローズ, #123 予知

#### `search_deck_to_ex` - デッキ検索→EXポケット
- **説明**: デッキから条件に合うカードをEXポケットに加える
- **パラメータ**: 検索条件（MP、色、タイプ等）
- **使用カード**: #63 リチャード(ユニット+シールド付与), #80 揺るぎない信仰心(緑ユニット/MP半減), #91 レミー(MP4紫ユニット), #145 アーカム(リベンジ発動ユニット), #146 ファントム(ユニット), #170 集結する魂(リベンジ発動ユニット)

#### `return_to_ex` - EXポケットに戻す
- **説明**: ユニットをEXポケットに戻す
- **対象**: 敵ユニット / 味方ユニット
- **使用カード**: #88 復興の夢(味方緑), #94 ゲリョス(攻撃力2以下の敵/Lv2), #122 こやし玉(敵), #132 魔力の封印(MP3以下の敵+枠封鎖)

#### `send_to_graveyard` - 墓地送り
- **説明**: デッキからカードを墓地に送る
- **使用カード**: #146 ファントム(MP4以下2枚), #161 ネルギガンテ(5枚まで), #175 偽りの王座(最高MPユニット1体)

#### `revive_from_graveyard` - 墓地から復活
- **説明**: 墓地からユニットをEXポケットまたは場に出す
- **使用カード**: #156 ベガ(MP5以下黒ユニット/+2/+2/MP-5), #161 ネルギガンテ(MP4以下/EX), #162 強化蘇生(+1/+1/場に出す), #163 屍肉漁り(MP5以上/+1/+1/EX)

#### `exile_from_graveyard` - 墓地から除外
- **説明**: 相手の墓地からユニットを除外
- **使用カード**: #24 レディ(3体まで)

#### `summon_from_deck` - デッキから場に出す
- **説明**: デッキから条件に合うユニットを場に出す
- **使用カード**: #164 下僕の使役(MP4以下+死亡時除外付与)

#### `modify_card_in_hand` - 手札/EXのカード変更
- **説明**: 手札やEXポケットにあるカードのステータスを変更
- **使用カード**: #20 ドノヴァン(MP-1), #64 レベッカ(人間ユニット攻撃力+1), #103 ローズ(MP-1), #125 見え透いた嘘(MP-2), #138 ラドバルキン(犠牲付与), #156 ベガ(MP-5)

#### `deck_exile` - デッキ除外
- **説明**: 自分のデッキからカードを除外
- **使用カード**: #172 悪魔との契約(3枚)

---

### 3.6 破壊/除去系

#### `destroy_target_unit` - 指定ユニット破壊
- **説明**: 条件に合う敵ユニット1体を破壊
- **使用カード**: #156 ベガ(MP6以下ランダム), #160 ウェスカー(MP5以下ランダム), #167 破壊の本能(単体), #171 自業自得(ランダム), #176 抹殺(単体)

#### `conditional_destroy` - 条件付き破壊
- **説明**: 対象の攻撃力やMPなどの条件に基づいて破壊
- **使用カード**: #158 T-002(攻撃力1以下の全ユニット/死亡時), #169 残虐な遊び(攻撃力1以下orMP4以下), #178 無音の処刑(攻撃力2以下or4以下)

#### `destroy_friendly_unit` - 味方ユニット破壊（コスト）
- **説明**: 味方ユニットを破壊して効果発動のコストとする
- **使用カード**: #40 刺し違え, #171 自業自得, #173 身勝手な捕食, #174 狂気の殺戮

#### `exile_unit` - ユニット除外
- **説明**: ユニットをゲームから除外
- **使用カード**: #43 連鎖する烈火(破壊時除外), #177 乗り移る悪意(除外→再召喚)

#### `slot_lock` - 枠封鎖
- **説明**: ユニット枠を一定時間使用不可にする
- **パラメータ**: duration（秒）
- **使用カード**: #132 魔力の封印(10秒)

---

### 3.7 リソース操作系

#### `mp_boost` - MPブースト
- **説明**: MP自動回復速度を増加
- **パラメータ**: boostPercent（20 or 50）
- **使用カード**: #52 アイルー(20%), #67 アイリス(50%)
- **CSV関数**: `mp_boost:20`, `mp_boost:50`

#### `mp_max_reduction` - MP最大値減少
- **説明**: 自分のMP最大値を減少
- **使用カード**: #157 VAVA(-2/場にいる間)

#### `mp_cost_reduction` - MPコスト減少
- **説明**: カードのMPコストを減少させる
- **使用カード**: #20 ドノヴァン(-1), #80 揺るぎない信仰心(半分), #103 ローズ(-1), #125 見え透いた嘘(-2), #156 ベガ(-5)

---

### 3.8 特殊メカニクス系

#### `growth_system` - 成長システム
- **説明**: 一定秒ごとにLvが上昇し、Lvに応じた効果を発動
- **パラメータ**: growthInterval（秒）, levelEffects（Lv→効果マップ）
- **使用カード**:
  - #3 アクセル（3秒/Lv2:HP+3, Lv3:攻撃時正面ダメージ）
  - #59 ザンギエフ（5秒/Lv2:全味方HP+3, Lv3:敵1体に自HP分ダメージ）
  - #94 ゲリョス（4秒/Lv2:攻撃力2以下の敵をEX返却）
  - #138 ラドバルキン（3秒/Lv2:相手カードに犠牲付与）
  - #140 レイダーキラー（3秒/Lv2:HP+2, Lv3:シールド）
  - #157 VAVA（3秒/Lv2:+1/+1, Lv3:全敵3ダメージ）

#### `memory_system` - メモリーシステム
- **説明**: アクションカード使用ごとにカウンターが増加し、閾値で効果発動
- **パラメータ**: threshold, triggerEffect
- **使用カード**:
  - #5 ドスランポス（4で+1/+1＆シールド）
  - #110 コーリン（4で効果ダメージ+1のオーラ）
  - #112 いぶき（4で5ダメージ振り分け）

#### `energy_system` - エナジーシステム
- **説明**: エナジーポイントを蓄積し、一定量で効果発動
- **パラメータ**: energyEffect, gainConditions
- **使用カード**:
  - #10 フレイム・スタッガー（攻撃力+1＆MP+1/攻撃時+2,アーツ使用時+3）
  - #66 ラージャン（+1/+1/攻撃時+2,戦闘生存時+3）

#### `revenge_system` - リベンジシステム
- **説明**: 味方ヒーローのライフが一定以下になると効果発動
- **使用カード**:
  - #136 ソドム(+1/+5)
  - #141 ゾンビ(攻撃力+2)
  - #142 ケルベロス(+1/+3＆俊敏)
  - #148 セス(+2/+3)
  - #158 T-002(HP+8)
  - #159 ジェダ(+2/+5)
  - #172 悪魔との契約(+2/+2付与)

#### `quest_system` - クエストシステム
- **説明**: 特定条件達成でLvが上昇し、段階的に効果発動
- **パラメータ**: questCondition, levelRewards
- **使用カード**:
  - #137 ドスギルオス（敵死亡でLvアップ/Lv2:+1/+1, Lv3:波及, Lv4:ライフ+3）

#### `unleash_system` - 解放システム
- **説明**: 解放ポイントが閾値に達すると効果発動
- **パラメータ**: threshold, unleashEffect
- **使用カード**:
  - #153 プロトタイラント（10で+2/+2）
  - #160 ウェスカー（10でMP5以下ランダム敵破壊）

#### `awakening_system` - 目覚めシステム
- **説明**: 特定条件で目覚め状態になり効果発動
- **使用カード**:
  - #11 ガンボルト（敵ユニットに4ダメージ振り分け）
  - #46 メットール（HP+2＆応援探索）
  - #105 ブーメル・クワンガー（+1/+1＆全敵攻撃力-2）
  - #148 セス（+1/+2＆MP+1）
  - #149 ロレント（目覚め回数分貫通ダメージ）

#### `resonate_system` - 呼応システム
- **説明**: 味方アクションカード使用時に効果発動
- **使用カード**:
  - #96 プラズマ（空戦付与）
  - #97 ヘル＝ラスト（攻撃力+1）
  - #98 ヘル＝プライド（HP+1）
  - #102 レイレイ（+2/+2）
  - #108 ヘル＝グリード（トークン召喚）
  - #110 コーリン（+1/+1）
  - #112 いぶき（HP+2）
  - #114 ジェスター（血染めの石像召喚）
  - #115 モリガン（正面5秒停止）
  - #116 ダンテ（魔人化変身）

#### `summon_token` - トークン召喚
- **説明**: 特定のトークンユニットを場に出す
- **パラメータ**: tokenId, count, targetSlots
- **使用カード**:
  - #50 ドスジャギィ（ジャギィ1体）
  - #69 フェリシア（全枠にフェリシア）
  - #83 頭目の招集（全枠にジャギィ）
  - #108 ヘル＝グリード（特定トークン1体）
  - #114 ジェスター（血染めの石像1体）
  - #179 広がりゆく感染（全枠に黒感染者）

#### `transform` - 変身
- **説明**: ユニットを別のユニットに変身させる
- **使用カード**: #116 ダンテ→魔人ダンテ

#### `negate_action` - アクション打ち消し
- **説明**: 条件に合う敵アクションカードを打ち消す
- **パラメータ**: mpThreshold, additionalEffect
- **使用カード**:
  - #117 予期せぬ妨害（MP3以下）
  - #118 まやかしの情報（MP≤場のユニット数）
  - #120 消された記憶（MP4以下）
  - #125 見え透いた嘘（MP4以下＋MP-2でEX返却）
  - #127 空蝉の術（対象ランダム変更）
  - #133 隠された真意（MP4以下＋ライフ半減）

#### `control_steal` - コントロール奪取
- **説明**: 敵ユニット1体のコントロールを奪う
- **使用カード**: #135 支配された頭脳

---

### 3.9 条件/トリガーシステム

#### `on_enter_field_condition` - 場に出た時条件分岐
- **説明**: 場に出た時にフィールド状態に応じて効果分岐
- **使用カード**: #19(敵なし:バフ+MP), #54(敵なし:バフ+シールド), #103(敵なし:デッキ検索), #153(敵なし:圧倒+MP)

#### `attack_threshold_trigger` - 攻撃力閾値トリガー
- **説明**: 初めて攻撃力が指定値以上になった時に効果発動
- **使用カード**: #10(5以上:10ダメージ), #13(5以上:全味方に圧倒)

#### `hp_threshold_trigger` - HP閾値トリガー
- **説明**: 初めてHPが指定値以上になった時に効果発動
- **使用カード**: #58(6以上:攻撃力+2), #61(12以上:MP+2)

#### `hp_range_buff` - HP範囲バフ
- **説明**: HPが一定値以下の間、バフを得る
- **使用カード**: #155 ザベル(HP3以下:攻撃力+3)

#### `on_hero_damage_trigger` - ヒーローダメージ時トリガー
- **説明**: 敵ヒーローにダメージを与えた時に追加効果
- **使用カード**: #18(全敵1ダメージ), #26(ランダム敵6ダメージ)

#### `on_halted_enemy_death` - 停止敵死亡時トリガー
- **説明**: 停止状態の敵ユニット死亡時に効果発動
- **使用カード**: #104(+1/+2), #106(ランダム敵13秒停止+DoT)

#### `on_friendly_enter` - 味方登場時トリガー
- **説明**: 味方ユニットが場に出た時に効果発動
- **使用カード**: #22(マシーンユニット:自身バフ), #60(封印), #91(MP4ユニット:攻撃力+1), #143(自壊)

#### `chain_counter` - 使用回数カウンター
- **説明**: バトル中の使用回数をカウントし、効果に反映
- **使用カード**: #25(アクション枚数分ダメージ), #43(使用回数+4ダメージ)

#### `unit_count_scaling` - ユニット数スケーリング
- **説明**: 場の味方ユニット数に応じて効果量が変動
- **使用カード**: #45 双龍の波動（ユニット数+3ダメージ）

#### `graveyard_count_scaling` - 墓地枚数スケーリング
- **説明**: 墓地のカード枚数に応じて効果量が変動
- **使用カード**: #180 血の宿命（黒ユニット枚数分攻撃力+1）

---

### 3.10 特殊効果

#### `ignore_units_attack_hero` - ユニット無視ヒーロー攻撃
- **説明**: 停止状態の敵ユニットを無視してヒーローに直接攻撃
- **使用カード**: #109 リリス, #115 モリガン

#### `effect_damage_amplify` - 効果ダメージ増幅
- **説明**: ダメージを与える効果の数値を+1する
- **対象**: 味方のアクション/ユニット効果
- **使用カード**: #21 レオン（場にいる間）, #110 コーリン（メモリー発動後/敵が受ける）

#### `dot_damage` - 継続ダメージ（DoT）
- **説明**: 一定秒ごとにダメージを与える
- **使用カード**: #106 ウェブ・スパイダス（5秒ごとに1ダメージ）

#### `instant_attack` - 即時攻撃
- **説明**: 対象ユニットに即座に攻撃させる
- **使用カード**: #84 猪突猛進

#### `reset_stats` - ステータスリセット
- **説明**: ユニットの攻撃力とHPを元の値に戻す
- **使用カード**: #87 緊急回避（MP5以下のユニット）

#### `reset_attack_timer` - 攻撃準備時間リセット
- **説明**: 攻撃準備時間をリセットする（即攻撃可能に）
- **使用カード**: #86 圧倒的な軍勢

#### `copy_ability` - 能力コピー
- **説明**: 倒したユニットの能力を自身に付与
- **使用カード**: #70 エックス（1回まで）

#### `death_trigger_suppress` - 死亡時能力抑制
- **説明**: 破壊したユニットの死亡時効果を発動させない
- **使用カード**: #43 連鎖する烈火

#### `redirect_action_target` - アクション対象変更
- **説明**: アクションカードの対象をランダムに変更
- **使用カード**: #127 空蝉の術

#### `self_destruct_on_ally_enter` - 味方登場時自壊
- **説明**: 味方ユニットが場に出た時に自身を破壊
- **使用カード**: #143 ダイナモ

#### `stat_from_hero_life` - ヒーローライフ依存ステータス
- **説明**: 味方ヒーローのライフを参照してステータスを決定
- **使用カード**: #160 ウェスカー（攻撃力とHPをライフ分マイナス）

#### `death_damage_to_hero` - 死亡時ヒーローダメージ
- **説明**: 死亡時に味方ヒーローに攻撃力分のダメージ
- **使用カード**: #180 血の宿命（付与）

#### `attack_once_then_destroy` - 1回攻撃後破壊
- **説明**: 1回攻撃すると自壊する
- **使用カード**: #168 悲しき変異

#### `anti_flight_damage_bonus` - 対空戦ダメージボーナス
- **説明**: 空戦ユニットへの攻撃ダメージ増加
- **使用カード**: #95 ラダーヤダー(+6)

#### `ex_pocket_lock` - EXポケット使用不可
- **説明**: 場にいる間、自分のEXポケットを使用できない
- **使用カード**: #139 ホイール・アリゲイツ

#### `remove_flight` - 空戦解除
- **説明**: ＜空戦＞ステータスを除去
- **使用カード**: #89 風翔の暴嵐

#### `re_summon` - 除外→再召喚
- **説明**: ユニットを除外し、同じ枠に再召喚（ステータスリセット）
- **使用カード**: #177 乗り移る悪意

#### `level_up_count_condition` - レベルアップ回数条件
- **説明**: 味方ユニットのレベルアップ回数を参照
- **使用カード**: #140 レイダーキラー（3回以上で攻撃力+1）

#### `combo_attack_buff` - 連撃攻撃バフ
- **説明**: 連撃のN回目攻撃ごとに攻撃力増加
- **使用カード**: #20 ドノヴァン（1回目:攻撃力+1）

---

## 4. 必要なトークンユニット定義

| トークン名 | 使用カード | 属性 | 推定ステータス |
|-----------|-----------|------|--------------|
| ジャギィ | #50, #83 | Green | 低コスト/低ステータス |
| フェリシア（トークン） | #69 | Green | 本体と同一 or 弱体版 |
| 血染めの石像 | #114 | Purple | 要調査 |
| 色欲を抱きしめる傲慢 | #108 | Purple | 要調査 |
| 脅威の者 | #108 | Purple | 要調査 |
| 黒感染者 | #179 | Black | 要調査 |
| 魔人ダンテ | #116 | Purple | ダンテの変身後形態 |
| ハンドガン | #21 | Red | アクションカード |
| 激昂 | #14 | Red | アクションカード |
| 応援 | #46 | Green | アクションカード |

---

## 5. 実装優先度の提案

### Phase 1: 基本ステータス効果（必須）
1. `grant_rush`, `grant_flight`, `grant_shield`, `grant_agility`
2. `grant_halt`, `grant_seal`
3. `grant_veil`, `grant_heavy_pierce`, `grant_combo`

### Phase 2: 基本ダメージ/バフ系
4. `damage_front_unit`, `damage_random_enemy_unit`
5. `damage_all_units`, `damage_all_enemy_units`, `damage_enemy_hero`
6. `buff_attack`, `buff_hp`, `buff_attack_and_hp`
7. `temp_buff_attack`, `debuff_attack`
8. `heal_hero`, `life_sacrifice`

### Phase 3: カード操作系
9. `explore`, `draw_to_ex`, `search_deck_to_ex`
10. `return_to_ex`, `revive_from_graveyard`
11. `summon_token`（トークン定義含む）
12. `destroy_target_unit`, `conditional_destroy`

### Phase 4: 特殊メカニクス
13. `growth_system`, `memory_system`, `energy_system`
14. `revenge_system`, `quest_system`, `unleash_system`
15. `awakening_system`, `resonate_system`

### Phase 5: 高度な効果
16. `negate_action`, `control_steal`, `transform`
17. `chain_counter`, `effect_damage_amplify`
18. 各種条件トリガー系
19. その他特殊効果

---

## 6. 型定義の拡張提案

### StatusEffect に追加が必要なもの
```typescript
export type StatusEffect =
  | 'rush' | 'flight' | 'shield' | 'agility' | 'combo'
  | 'veil' | 'crush' | 'heavy_pierce' | 'spillover'
  | 'halt' | 'seal'
  // 追加
  | 'anti_air'       // 対空
  | 'mp_boost'       // MPブースト
```

### EffectTrigger に追加が必要なもの
```typescript
export type EffectTrigger =
  // 既存のまま
  | 'when_played' | 'attacking' | 'after_attack' | 'death'
  | 'while_on_field' | 'decimate' | 'resonate' | 'revenge'
  | 'ascended' | 'unleash' | 'quest' | 'growth' | 'memory'
  // 追加
  | 'enter_field'           // 場に出た時（プレイ以外含む）
  | 'hero_damaged_enemy'    // 敵ヒーローにダメージ時
  | 'friendly_unit_enter'   // 味方ユニット登場時
  | 'enemy_unit_death'      // 敵ユニット死亡時
  | 'halted_enemy_death'    // 停止敵死亡時
  | 'attack_threshold'      // 攻撃力閾値到達時
  | 'hp_threshold'          // HP閾値到達時
  | 'survived_combat'       // 戦闘生存時
  | 'destroy_by_attack'     // 攻撃による破壊時
  | 'awakening'             // 目覚め時
  | 'energy'                // エナジー発動時
```

### EffectTarget に追加が必要なもの
```typescript
export type EffectTarget =
  // 既存のまま
  | 'self' | 'friendly_unit' | 'enemy_unit'
  | 'friendly_hero' | 'enemy_hero'
  | 'all_units' | 'all_friendly_units' | 'all_enemy_units'
  | 'unit_in_front' | 'random_unit'
  | 'random_friendly_unit' | 'random_enemy_unit'
  // 追加
  | 'all_units_and_heroes'     // 全ユニットとヒーロー
  | 'halted_enemy_units'       // 停止状態の敵ユニット
  | 'lowest_hp_enemy_unit'     // 最低HP敵ユニット
  | 'flight_units'             // 空戦ユニット
  | 'destroyer_unit'           // 自身を破壊した敵
  | 'killed_unit'              // 撃破したユニット
  | 'all_own_slots'            // 全ての自分の枠
```
